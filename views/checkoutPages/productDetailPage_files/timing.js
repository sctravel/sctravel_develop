var detailPageTiming={nowTime:null,endTime:null,buyAble:false,sit:null,getTiming:function(){var leftTime=this.endTime.getTime()-this.nowTime.getTime();this.nowTime.setTime(this.nowTime.getTime()+1000);var leftsecond=parseInt(leftTime/1000);var day1=Math.floor(leftsecond/(60*60*24));var hour=Math.floor((leftsecond-day1*24*60*60)/3600);var minute=Math.floor((leftsecond-day1*24*60*60-hour*3600)/60);var second=Math.floor(leftsecond-day1*24*60*60-hour*3600-minute*60);if(day1<0){day1=0;hour=0;minute=0;second=0;}
return{"day":day1,"hour":hour,"minute":minute,"second":second};},changeTime:function(){var timing=this.getTiming();if(!timing.day&&!timing.hour&&!timing.minute&&!timing.second){this.buyAble=true;$(".buy_ready").text("立即抢购").removeClass("buy_ready");clearInterval(this.sit);}else{$(".zizhu_order_btn,.order_btn").text("即将开抢");$(".zizhu_order_btn").attr("class","zizhu_order_btn f_wb noStyleOrderButton buy_ready");$(".order_btn").attr("class","order_btn order_btn_new buy_ready");}
$("#timing span:eq(0)").text(timing.day);timing.hour=timing.hour<10?"0"+timing.hour:""+timing.hour;timing.minute=timing.minute<10?"0"+timing.minute:""+timing.minute;timing.second=timing.second<10?"0"+timing.second:""+timing.second;$("#timing span:eq(1)").text(timing.hour.split("")[0]);$("#timing span:eq(2)").text(timing.hour.split("")[1]);$("#timing span:eq(3)").text(timing.minute.split("")[0]);$("#timing span:eq(4)").text(timing.minute.split("")[1]);$("#timing span:eq(5)").text(timing.second.split("")[0]);$("#timing span:eq(6)").text(timing.second.split("")[1]);},initHtml:function(){var html='<div class="timing_box">'+'<div class="cont">'+'<div class="time clearfix" id="timing">'+'<span>9</span>'+'<span style="margin-left:30px;">5</span>'+'<span style="margin-left:3px;">9</span>'+'<span style="margin-left:22px;">5</span>'+'<span style="margin-left:3px;">9</span>'+'<span style="margin-left:23px;">5</span>'+'<span style="margin-left:3px;">9</span>'+'</div>'+'<ul class="clearfix">'+'<li></li>'+'<li style="margin-left:30px;"></li>'+'<li style="margin-left:3px;"></li>'+'<li style="margin-left:22px;"></li>'+'<li style="margin-left:3px;"></li>'+'<li style="margin-left:23px;"></li>'+'<li style="margin-left:3px;"></li>'+'</ul>'+'</div>'+'</div>';$("body").append(html);},init:function(nowTime,endTime){var _this=this;this.initHtml();this.nowTime=new Date(nowTime);this.endTime=new Date(endTime);this.sit=setInterval(function(){_this.changeTime();},1000);}}